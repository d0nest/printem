<!-- login -->
 <!DOCTYPE html>
 <head>
    
    <style>
        h4 {
            margin: 0;
            padding:0;
        }
    </style>
    
 </head>
 <body>
    <h4 id="warning">warnings will appear here!</h4>
    <h2>login</h2>
    <form id="form">
        <table>
            <tbody>
                <tr>
                    <td>username:</td>
                    <td>
                        <input id="username" name="username" type="text" size="20" autocapitalize="false" autofocus="false" autocomplete="false"
                                                spellcheck="false">
                    </td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td>
                        <input id="pass" name="password" type="password" size="20">
                    </td>
                </tr>
            </tbody>
        </table>
        <br>
        <input type="submit" value="login">
        <br><br>
        <a href="resetPassword.html">Forgot Your Password?</a>
    </form>
    
    <script>
        const username = document.getElementById('username');
        const pass = document.getElementById('pass');
        const form = document.getElementById('form');
        
        form.onsubmit = async function (event) {
            event.preventDefault()
            if (!validation()) {
                document.getElementById('warning').innerText = 'don\'t you dare leave any of those rectangular boxes empty!'
                return;
            }
                new FormData(form);
        }
        
        form.onformdata  = async function(event) {
            try{
                console.log('trying submitting request')
                const res = await fetch('http://localhost:3000/login/user', { method: 'POST', body: event.formData });
                if (res.status === 200) {
                    window.location.href = '/dashboard'
                }
                else{
                    document.getElementById('warning').innerText = res.statusText;
                }
            }
            catch(err){
                console.error('error ', err);   
            }
        }

        function validation() {
            let result = false;
            return username.value.trim() === '' || pass.value.trim() === '' ? false : true;
        }
    </script>
 </body>